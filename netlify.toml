# /netlify.toml

# Этот раздел указывает Netlify, где находятся ваши серверные функции.
[functions]
  directory = "netlify/functions/"

# Этот раздел говорит Netlify, что для сайта не требуется команда сборки,
# и что публиковать нужно все файлы из корневой папки.
[build]
  command = "" # Команда сборки не нужна
  publish = "/" # Публикуем корень проекта

# Увеличиваем время ожидания для нашей ФОНОВОЙ функции
[functions."result-background"]
  timeout = 90
  
[functions."stripe-webhook"]
  external_node_modules = ["stripe"]

# НОВОЕ ПРАВИЛО: Увеличиваем время ожидания для функции админ-панели
[functions."getAdminData"]
  timeout = 25 # Увеличиваем лимит до 25 секунд

[[headers]]
  for = "/.netlify/functions/stripe-webhook"
  [headers.values]
    Content-Type = "application/json"
