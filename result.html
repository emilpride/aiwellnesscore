<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI WELLNESSCORE — Результаты анализа</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <style>
    :root { --bg: #0b0d12; --card: #121521; --muted: #8a92a6; --brand: #6ee7b7; --accent: #60a5fa; }
    html, body { background: var(--bg); color: #e5e7eb; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial; }
    .glass { background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03)); border: 1px solid rgba(255,255,255,0.09); backdrop-filter: blur(8px); }
    .card { background: var(--card); border: 1px solid rgba(255,255,255,.06); border-radius: 18px; }
    .shine { position: relative; overflow: hidden; }
    .shine::after { content: ""; position: absolute; inset: -150% -150% auto auto; width: 120%; height: 120%; background: conic-gradient(from 90deg at 50% 50%, transparent 0 40%, rgba(255,255,255,.05) 50%, transparent 60%); animation: rotate 8s linear infinite; pointer-events:none; }
    @keyframes rotate { to { transform: rotate(360deg);} }

    /* Полукруг-гейдж (как на лендинге) */
    .gauge {
      width: 280px; height: 140px; position: relative;
      border-bottom-left-radius: 280px; border-bottom-right-radius: 280px; overflow: hidden;
      mask-image: linear-gradient(to bottom, black 62%, transparent 62%); /* показывает только верхнюю половину */
    }
    .gauge-fill {
      position:absolute; inset:-70% -70% auto -70%; width: 400px; height: 400px;
      border-radius: 50%;
      background: conic-gradient(var(--brand) 0deg, var(--brand) 0deg, rgba(255,255,255,.08) 0deg 360deg);
      transition: background 1.2s ease;
    }
    .gauge-center {
      position:absolute; left:50%; top:50%; transform: translate(-50%, -20%);
      text-align:center;
    }
    .blurred .blur-target { filter: blur(8px); opacity:.9; pointer-events: none; }
    .badge { border: 1px solid rgba(255,255,255,.12); border-radius: 9999px; padding: 4px 10px; font-size: 12px; color: var(--muted); }
    .divider { height:1px; background: linear-gradient(90deg, transparent, rgba(255,255,255,.08), transparent); }
  </style>
</head>
<body>
  <!-- Top Bar -->
  <header class="sticky top-0 z-40 glass">
    <div class="mx-auto max-w-6xl px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="w-9 h-9 rounded-xl bg-gradient-to-br from-emerald-400/70 to-cyan-400/70 grid place-items-center">
          <span class="text-black font-extrabold">W</span>
        </div>
        <div>
          <div class="text-sm text-gray-400">AI WELLNESSCORE</div>
          <div class="text-xs text-gray-500 -mt-1">Personalized Wellness Intelligence</div>
        </div>
      </div>
      <div class="hidden md:flex items-center gap-3">
        <span class="badge">SSL Secured</span>
        <span class="badge">GDPR Ready</span>
        <span class="badge">Bank-grade Encryption</span>
      </div>
    </div>
  </header>

  <main id="pdf-root" class="mx-auto max-w-6xl px-4 py-8 space-y-8">
    <!-- HERO -->
    <section class="grid lg:grid-cols-2 gap-6 items-stretch">
      <div class="card p-6 shine">
        <div class="flex items-center justify-between">
          <h1 class="text-2xl font-semibold">Ваш персональный wellness-отчёт</h1>
          <span id="archetype" class="badge">Archetype: —</span>
        </div>
        <div class="mt-6 grid sm:grid-cols-2 gap-6 items-center">
          <!-- Gauge -->
          <div class="flex flex-col items-center gap-3">
            <div class="gauge" aria-label="Wellness Score gauge">
              <div id="gaugeFill" class="gauge-fill"></div>
            </div>
            <div class="gauge-center">
              <div class="text-sm text-gray-400">Wellness Score</div>
              <div id="wellnessScore" class="text-4xl font-extrabold">—</div>
            </div>
          </div>
          <!-- Metrics -->
          <div class="space-y-4">
            <div class="p-4 rounded-xl border border-white/10 bg-white/5">
              <div class="text-sm text-gray-400">Биологический возраст</div>
              <div id="biologicalAge" class="text-2xl font-semibold">—</div>
            </div>
            <div class="p-4 rounded-xl border border-white/10 bg-white/5">
              <div class="text-sm text-gray-400">Energy Index</div>
              <div id="energyIndex" class="text-2xl font-semibold">—</div>
            </div>
            <div class="p-4 rounded-xl border border-white/10 bg-white/5">
              <div class="text-sm text-gray-400">Stress Level</div>
              <div id="stressLevel" class="text-2xl font-semibold">—</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Insights -->
      <div class="card p-6">
        <h2 class="text-xl font-semibold">Быстрые выводы</h2>
        <div class="mt-4 space-y-4">
          <div class="p-4 rounded-xl bg-white/5 border border-white/10">
            <div class="text-sm text-gray-400">Главный барьер</div>
            <div id="mainBarrier" class="text-base">—</div>
          </div>
          <div class="p-4 rounded-xl bg-white/5 border border-white/10">
            <div class="text-sm text-gray-400">Быстрая победа</div>
            <div id="quickWin" class="text-base">—</div>
          </div>
          <div class="p-4 rounded-xl bg-white/5 border border-white/10">
            <div class="text-sm text-gray-400">Сравнение</div>
            <div id="comparison" class="text-base">—</div>
          </div>
        </div>
        <div class="mt-6 divider"></div>
        <div class="mt-6 grid grid-cols-2 sm:grid-cols-4 gap-3">
          <div class="text-sm text-gray-400">Mind</div>
          <div class="text-sm text-gray-400">Body</div>
          <div class="text-sm text-gray-400">Nutrition</div>
          <div class="text-sm text-gray-400">Sleep</div>
          <div id="mindScore" class="text-lg font-semibold">—</div>
          <div id="bodyScore" class="text-lg font-semibold">—</div>
          <div id="nutritionScore" class="text-lg font-semibold">—</div>
          <div id="sleepScore" class="text-lg font-semibold">—</div>
        </div>
        <div class="mt-4">
          <canvas id="coreChart" height="200"></canvas>
        </div>
      </div>
    </section>

    <!-- Core Four Details -->
    <section class="card p-6">
      <h2 class="text-xl font-semibold mb-4">Core Four: краткий обзор</h2>
      <div class="grid md:grid-cols-4 gap-4">
        <div class="p-4 rounded-xl bg-white/5 border border-white/10">
          <div class="text-sm text-gray-400 mb-1">Mind</div>
          <div id="mindSummary" class="text-sm">—</div>
        </div>
        <div class="p-4 rounded-xl bg-white/5 border border-white/10">
          <div class="text-sm text-gray-400 mb-1">Body</div>
          <div id="bodySummary" class="text-sm">—</div>
        </div>
        <div class="p-4 rounded-xl bg-white/5 border border-white/10">
          <div class="text-sm text-gray-400 mb-1">Nutrition</div>
          <div id="nutritionSummary" class="text-sm">—</div>
        </div>
        <div class="p-4 rounded-xl bg-white/5 border border-white/10">
          <div class="text-sm text-gray-400 mb-1">Sleep</div>
          <div id="sleepSummary" class="text-sm">—</div>
        </div>
      </div>
    </section>

    <!-- PREMIUM SECTION (blurred until unlock) -->
    <section id="premiumSection" class="card p-6 blurred">
      <div class="flex items-center justify-between">
        <h2 class="text-xl font-semibold">Премиум-аналитика</h2>
        <span class="badge">Доступно в Premium</span>
      </div>

      <!-- Detailed Analytics -->
      <div class="mt-6 space-y-6">
        <div>
          <h3 class="text-sm uppercase tracking-wider text-gray-400">Detailed Analytics</h3>
          <div class="grid md:grid-cols-4 gap-4 mt-3">
            <div class="p-4 rounded-xl bg-white/5 border border-white/10">
              <div class="text-xs text-gray-400 mb-1">metabolicAge</div>
              <div class="blur-target" id="metabolicAge">—</div>
            </div>
            <div class="p-4 rounded-xl bg-white/5 border border-white/10">
              <div class="text-xs text-gray-400 mb-1">recoveryScore</div>
              <div class="blur-target" id="recoveryScore">—</div>
            </div>
            <div class="p-4 rounded-xl bg-white/5 border border-white/10">
              <div class="text-xs text-gray-400 mb-1">inflammationRisk</div>
              <div class="blur-target" id="inflammationRisk">—</div>
            </div>
            <div class="p-4 rounded-xl bg-white/5 border border-white/10">
              <div class="text-xs text-gray-400 mb-1">digitalWellnessScore</div>
              <div class="blur-target" id="digitalWellnessScore">—</div>
            </div>
          </div>
        </div>

        <!-- Face Analysis -->
        <div>
          <h3 class="text-sm uppercase tracking-wider text-gray-400">Face Analysis</h3>
          <div class="grid md:grid-cols-4 gap-4 mt-3">
            <div class="p-4 rounded-xl bg-white/5 border border-white/10">
              <div class="text-xs text-gray-400 mb-1">skinHealthScore</div>
              <div class="blur-target" id="skinHealthScore">—</div>
            </div>
            <div class="p-4 rounded-xl bg-white/5 border border-white/10">
              <div class="text-xs text-gray-400 mb-1">hydrationAssessment</div>
              <div class="blur-target" id="hydrationAssessment">—</div>
            </div>
            <div class="p-4 rounded-xl bg-white/5 border border-white/10">
              <div class="text-xs text-gray-400 mb-1">sleepDebtVisualization</div>
              <div class="blur-target" id="sleepDebtVisualization">—</div>
            </div>
            <div class="p-4 rounded-xl bg-white/5 border border-white/10">
              <div class="text-xs text-gray-400 mb-1">stressMarkers</div>
              <div class="blur-target" id="stressMarkers">—</div>
            </div>
          </div>
        </div>

        <!-- Recommendations -->
        <div>
          <h3 class="text-sm uppercase tracking-wider text-gray-400">Personalized Recommendations</h3>
          <div class="grid md:grid-cols-4 gap-4 mt-3">
            <div class="p-4 rounded-xl bg-white/5 border border-white/10">
              <div class="text-xs text-gray-400 mb-1">circadianReset</div>
              <div class="blur-target" id="circadianReset">—</div>
            </div>
            <div class="p-4 rounded-xl bg-white/5 border border-white/10">
              <div class="text-xs text-gray-400 mb-1">nutritionGaps</div>
              <div class="blur-target" id="nutritionGaps">—</div>
            </div>
            <div class="p-4 rounded-xl bg-white/5 border border-white/10">
              <div class="text-xs text-gray-400 mb-1">exercisePrescription</div>
              <div class="blur-target" id="exercisePrescription">—</div>
            </div>
            <div class="p-4 rounded-xl bg-white/5 border border-white/10">
              <div class="text-xs text-gray-400 mb-1">stressToolkit</div>
              <div class="blur-target" id="stressToolkit">—</div>
            </div>
          </div>
        </div>

        <!-- Forecasts -->
        <div>
          <h3 class="text-sm uppercase tracking-wider text-gray-400">Forecasts</h3>
          <div class="grid md:grid-cols-3 gap-4 mt-3">
            <div class="p-4 rounded-xl bg-white/5 border border-white/10">
              <div class="text-xs text-gray-400 mb-1">30-Day Potential</div>
              <div class="blur-target" id="thirtyDayPotential">—</div>
            </div>
            <div class="p-4 rounded-xl bg-white/5 border border-white/10">
              <div class="text-xs text-gray-400 mb-1">Risk Timeline</div>
              <div class="blur-target" id="riskTimeline">—</div>
            </div>
            <div class="p-4 rounded-xl bg-white/5 border border-white/10">
              <div class="text-xs text-gray-400 mb-1">Habit Stacking Plan</div>
              <div class="blur-target" id="habitStackingPlan">—</div>
            </div>
          </div>
        </div>

        <!-- Unique Features -->
        <div>
          <h3 class="text-sm uppercase tracking-wider text-gray-400">Unique Features</h3>
          <div class="grid md:grid-cols-4 gap-4 mt-3">
            <div class="p-4 rounded-xl bg-white/5 border border-white/10">
              <div class="text-xs text-gray-400 mb-1">wellnessWeather</div>
              <div class="blur-target" id="wellnessWeather">—</div>
            </div>
            <div class="p-4 rounded-xl bg-white/5 border border-white/10">
              <div class="text-xs text-gray-400 mb-1">energyMatrix</div>
              <div class="blur-target" id="energyMatrix">—</div>
            </div>
            <div class="p-4 rounded-xl bg-white/5 border border-white/10">
              <div class="text-xs text-gray-400 mb-1">socialHealthScore</div>
              <div class="blur-target" id="socialHealthScore">—</div>
            </div>
            <div class="p-4 rounded-xl bg-white/5 border border-white/10">
              <div class="text-xs text-gray-400 mb-1">supplementStack</div>
              <div class="blur-target" id="supplementStack">—</div>
            </div>
          </div>
        </div>

        <div class="mt-6">
          <canvas id="premiumChart" height="140"></canvas>
        </div>

        <div class="mt-4 text-sm text-gray-400">
          <span class="text-white font-medium">AI Coach Notes:</span>
          <span id="aiCoachNotes" class="blur-target">—</span>
        </div>
      </div>
    </section>

    <!-- PAYMENT STRIP -->
    <section id="paymentStrip" class="glass rounded-2xl p-5 sticky bottom-4">
      <div class="flex flex-col md:flex-row md:items-center gap-4 justify-between">
        <div class="flex items-center gap-4">
          <div class="w-10 h-10 rounded-xl bg-emerald-400/20 grid place-items-center border border-emerald-400/30">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
              <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4Z" stroke="#34d399" stroke-width="1.5"/>
              <path d="M8 12l2.5 2.5L16 9" stroke="#34d399" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
          </div>
          <div>
            <div class="text-sm text-gray-400">Premium доступ</div>
            <div class="text-base md:text-lg font-semibold">Уникальное предложение • <span class="text-emerald-300">-30%</span> только сейчас</div>
            <div class="text-xs text-gray-400 mt-0.5">Осталось времени: <span id="timer" class="text-white font-semibold">15:00</span></div>
          </div>
        </div>
        <div class="flex items-center gap-3">
          <img alt="visa" class="h-6 opacity-70" src="https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg">
          <img alt="mc" class="h-6 opacity-70" src="https://upload.wikimedia.org/wikipedia/commons/2/2a/Mastercard-logo.svg">
          <img alt="amex" class="h-6 opacity-70" src="https://upload.wikimedia.org/wikipedia/commons/3/30/American_Express_logo_%282018%29.svg">
          <span class="hidden md:inline text-xs text-gray-500 ml-2">128-bit SSL • 3D Secure • PCI DSS</span>
        </div>
        <div class="flex items-center gap-3">
          <div class="text-right">
            <div class="text-xs line-through text-gray-500">€39.00</div>
            <div class="text-xl font-bold">€27.30</div>
          </div>
          <button id="payBtn" class="px-5 py-3 rounded-xl bg-emerald-400 text-black font-semibold hover:opacity-90 transition">
            Unlock Premium
          </button>
          <button id="downloadBtn" class="hidden px-5 py-3 rounded-xl bg-white/10 border border-white/20 font-semibold hover:bg-white/15 transition">
            Download PDF
          </button>
        </div>
      </div>
    </section>
  </main>

  <!-- MODAL -->
  <div id="modal" class="fixed inset-0 bg-black/60 backdrop-blur-sm hidden items-center justify-center z-50">
    <div class="card p-6 max-w-md w-full">
      <h3 class="text-xl font-semibold">Payment success</h3>
      <p class="text-sm text-gray-400 mt-2">Премиум-доступ активирован. Содержимое разблокировано.</p>
      <div class="mt-5 flex justify-end">
        <button id="modalClose" class="px-4 py-2 rounded-lg bg-emerald-400 text-black font-semibold">Ок</button>
      </div>
    </div>
  </div>

  <script>
    // --------- Helpers ----------
    const $ = (id) => document.getElementById(id);
    const fmt = (v) => (v === null || v === undefined || v === "" ? "—" : v);

    function getSessionId() {
      const url = new URL(location.href);
      return url.searchParams.get("sessionId");
    }

    async function fetchReport(sessionId) {
      const res = await fetch("/.netlify/functions/generateReport", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ sessionId })
      });
      if (!res.ok) throw new Error("Failed to fetch report");
      const json = await res.json();
      if (json.status !== "complete") throw new Error("Report not complete");
      return json.data;
    }

    // --------- Gauge (semi-circle) ----------
    function setGauge(score) {
      const clamped = Math.max(0, Math.min(100, Number(score || 0)));
      const deg = (clamped / 100) * 360;
      $("gaugeFill").style.background =
        `conic-gradient(var(--brand) ${deg}deg, rgba(255,255,255,.08) ${deg}deg 360deg)`;
      $("wellnessScore").textContent = Math.round(clamped);
    }

    // --------- Charts ----------
    let coreChart, premiumChart;
    function renderCoreChart({ mind, body, nutrition, sleep }) {
      const ctx = $("coreChart").getContext("2d");
      if (coreChart) coreChart.destroy();
      coreChart = new Chart(ctx, {
        type: "radar",
        data: {
          labels: ["Mind", "Body", "Nutrition", "Sleep"],
          datasets: [{
            label: "Core Four",
            data: [mind?.score||0, body?.score||0, nutrition?.score||0, sleep?.score||0],
            fill: true,
          }]
        },
        options: {
          responsive: true,
          scales: { r: { beginAtZero: true, max: 100, ticks: { display: false } } },
          plugins: { legend: { display: false } }
        }
      });
    }
    function renderPremiumChart(detailed) {
      const ctx = $("premiumChart").getContext("2d");
      if (premiumChart) premiumChart.destroy();
      const vals = [
        Number(detailed?.metabolicAge)||0,
        Number(detailed?.recoveryScore)||0,
        Number(detailed?.inflammationRisk)||0,
        Number(detailed?.digitalWellnessScore)||0
      ];
      premiumChart = new Chart(ctx, {
        type: "bar",
        data: {
          labels: ["Metabolic Age","Recovery","Inflammation","Digital"],
          datasets: [{ label: "Premium Metrics", data: vals }]
        },
        options: {
          responsive: true,
          plugins: { legend: { display: false } },
          scales: { y: { beginAtZero: true, suggestedMax: 100 } }
        }
      });
    }

    // --------- Renderers ----------
    function fillText(id, value) { const el = $(id); if (el) el.textContent = fmt(value); }

    function renderFree(report) {
      const m = report?.metrics || {};
      setGauge(m?.wellnessScore);
      fillText("biologicalAge", m?.biologicalAge);
      fillText("energyIndex", m?.energyIndex);
      fillText("stressLevel", m?.stressLevel);

      const core = report?.coreFour || {};
      fillText("mindScore", core?.mind?.score);
      fillText("bodyScore", core?.body?.score);
      fillText("nutritionScore", core?.nutrition?.score);
      fillText("sleepScore", core?.sleep?.score);

      fillText("mindSummary", core?.mind?.summary);
      fillText("bodySummary", core?.body?.summary);
      fillText("nutritionSummary", core?.nutrition?.summary);
      fillText("sleepSummary", core?.sleep?.summary);

      const ins = report?.insights || {};
      fillText("mainBarrier", ins?.mainBarrier);
      fillText("quickWin", ins?.quickWin);
      fillText("comparison", ins?.comparison);

      renderCoreChart(core);
    }

    function renderPremium(premium) {
      const da = premium?.detailedAnalytics || {};
      fillText("metabolicAge", da?.metabolicAge);
      fillText("recoveryScore", da?.recoveryScore);
      fillText("inflammationRisk", da?.inflammationRisk);
      fillText("digitalWellnessScore", da?.digitalWellnessScore);

      const fa = premium?.faceAnalysis || {};
      fillText("skinHealthScore", fa?.skinHealthScore);
      fillText("hydrationAssessment", fa?.hydrationAssessment);
      fillText("sleepDebtVisualization", fa?.sleepDebtVisualization);
      fillText("stressMarkers", fa?.stressMarkers);

      const rec = premium?.recommendations || {};
      fillText("circadianReset", rec?.circadianReset);
      fillText("nutritionGaps", rec?.nutritionGaps);
      fillText("exercisePrescription", rec?.exercisePrescription);
      fillText("stressToolkit", rec?.stressToolkit);

      const fc = premium?.forecasts || {};
      fillText("thirtyDayPotential", fc?.thirtyDayPotential);
      fillText("riskTimeline", fc?.riskTimeline);
      fillText("habitStackingPlan", fc?.habitStackingPlan);

      const uf = premium?.uniqueFeatures || {};
      fillText("wellnessWeather", uf?.wellnessWeather);
      fillText("energyMatrix", uf?.energyMatrix);
      fillText("socialHealthScore", uf?.socialHealthScore);
      fillText("supplementStack", uf?.supplementStack);

      fillText("aiCoachNotes", premium?.aiCoachNotes);

      renderPremiumChart(da);
    }

    // --------- Payment Mock ----------
    let premiumUnlocked = false;
    function unlockPremiumUI() {
      premiumUnlocked = true;
      $("premiumSection").classList.remove("blurred");
      $("payBtn").classList.add("hidden");
      $("downloadBtn").classList.remove("hidden");
    }

    // --------- Timer 15:00 ----------
    function startTimer(seconds = 900) {
      let left = seconds;
      const iv = setInterval(() => {
        const m = String(Math.floor(left/60)).padStart(2,"0");
        const s = String(left%60).padStart(2,"0");
        $("timer").textContent = `${m}:${s}`;
        if (left <= 0) {
          clearInterval(iv);
          // Снятие скидки по истечении времени (визуально)
          document.querySelector("#paymentStrip .line-through").classList.remove("line-through");
        }
        left--;
      }, 1000);
    }

    // --------- PDF ----------
    async function downloadPDF() {
      const { jsPDF } = window.jspdf;
      const pdf = new jsPDF({ unit: "px", hotfixes: ["px_scaling"] });
      const el = document.getElementById("pdf-root");
      const canvas = await html2canvas(el, { scale: 2, backgroundColor: "#0b0d12" });
      const img = canvas.toDataURL("image/png");
      const pageWidth = pdf.internal.pageSize.getWidth();
      const ratio = pageWidth / canvas.width;
      const pageHeight = canvas.height * ratio;

      pdf.addImage(img, "PNG", 0, 0, pageWidth, pageHeight, "", "FAST");
      pdf.save("AI-WELLNESSCORE-Report.pdf");
    }

    // --------- Boot ----------
    (async function init() {
      try {
        startTimer(15*60);
        $("downloadBtn").addEventListener("click", downloadPDF);
        $("payBtn").addEventListener("click", () => {
          $("modal").classList.remove("hidden");
          unlockPremiumUI(); // имитация успешной оплаты
        });
        $("modalClose").addEventListener("click", () => $("modal").classList.add("hidden"));

        const sessionId = getSessionId();
        if (!sessionId) {
          // Для локального теста: можно положить window.mockReport сюда
          console.warn("sessionId is missing. Provide ?sessionId=... in URL.");
          return;
        }

        const data = await fetchReport(sessionId);
        // Архетип
        document.getElementById("archetype").textContent = `Archetype: ${fmt(data?.freeReport?.archetype || "—")}`;

        renderFree(data?.freeReport);
        renderPremium(data?.premiumReport);
      } catch (e) {
        console.error(e);
      }
    })();
  </script>
</body>
</html>
